<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Management Project</title>
	<link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.15/css/jquery.dataTables.min.css" />
	<script src="//code.jquery.com/jquery-1.11.3.min.js" ></script>
	<script src="//cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js">

	</script>
	<script>
	
		function confirmer(){
			return confirm("etes vous vouloir supprimer !")
		}
		$(document).ready(function(){
		    $('.myTable').DataTable();
		});
	
	</script>
</h:head>
<h:body>
<!--  
required="true" requiredMessage="Budget est obligatoire !" 
required="true" requiredMessage="Type est obligatoire !"-->
	<h:form id="forms">
	<!-- Ajout InputHidden pour garder les valeurs des champs parceque j'utilise comme scope Request -->
		<h:inputHidden value="#{projetBean1.id}"></h:inputHidden>
		<h:inputHidden value="#{projetBean1.operation}"></h:inputHidden>
		
	<h3><center style="color: blue;">La liste des projets</center> </h3>
	
	<h:dataTable styleClass="myTable" value="#{projetBean1.projetList}" var="o" >
	
		<h:column>
			<f:facet name="header">Code</f:facet>
		<!-- Ajout methode edit -->	
			<h:link value="#{o.id}">
			
			
				<f:param name="id" value="#{o.id}"></f:param>
				<f:param name="operation" value="edit"></f:param>
			</h:link>
		
		</h:column>
	
			<h:column>
		    <f:facet name="header">Titre</f:facet>
			<h:outputText value="#{o.title}"></h:outputText>
		
		</h:column>
		
		<h:column>
			<f:facet name="header">Budget</f:facet>	
			<h:outputText value="#{o.budget}">
				<f:convertNumber type="currency" currencyCode="MAD"></f:convertNumber>
			</h:outputText>
		
		</h:column>
		
		<h:column>
			<f:facet name="header">Type</f:facet>
			<h:outputText value="#{o.type.name}"></h:outputText>  
		
		</h:column>
		
		<h:column>
		
			<f:facet name="header">Active</f:facet>
			<!-- Test Width giup pannel -->
			<h:panelGroup rendered="#{o.active eq 'Y'}">
			
				<h:outputText value="Oui"></h:outputText>
			
			</h:panelGroup>
			
			<h:panelGroup rendered="#{!(o.active eq 'Y')}">
			
				<h:outputText value="Non"></h:outputText>
			
			</h:panelGroup>
		
		</h:column>
		
		<h:column>
		
			<f:facet name="header">Supprimer</f:facet>
			<h:commandLink onclick="return confirmer();" actionListener="#{projetBean1.deleteProject}">
				
				<h:graphicImage library="images" name="trach.png"></h:graphicImage>
				
				<f:param name="id" value="#{o.id}"></f:param>
				<f:param name="name" value="nidhal"></f:param>
			
			</h:commandLink>

		</h:column>		
		
	</h:dataTable>
	
 <h3>Ajouter un nouveau projet </h3>
 
			<h:messages style="border:2px solid green; color:red; padding:5px; widh:100%;" ></h:messages>
			
		
		
	  <h:commandButton value="show Forms" actionListener="#{projetBean1.showFormAction}"></h:commandButton>
 	  
	
	  <h:panelGroup id="addProjectForms" rendered="#{projetBean1.showForm}">
	  
			<h:outputText value="#{projetBean1.success}" style="color:green; font-weight:bold"></h:outputText>
			
			<table>
				<tr> 
					<td><h:outputLabel value="Titre : " for="title"></h:outputLabel></td>
					<td><h:inputText  value="#{projetBean1.title}" id="title"></h:inputText></td>
				</tr>
			
				<tr> 
					<td><h:outputLabel value="Description : " for="description"></h:outputLabel></td>
					<td><h:inputTextarea rows="8"  cols="100" id="description" value="#{projetBean1.description}"></h:inputTextarea></td>
				</tr>
				
				<tr> 
					<td><h:outputLabel value="budget : " for="budget"></h:outputLabel></td>
					
					<td><h:inputText value="#{projetBean1.budget}" id="budget"></h:inputText></td>
				</tr>		
				
				<tr>
				
						<td><h:outputLabel value="Type : " for="type"></h:outputLabel></td>
						<td><h:selectOneMenu id="type" value="#{projetBean1.type}">
							<f:selectItems value="#{projetBean1.typeList}"></f:selectItems>
							</h:selectOneMenu></td>
				
				
				
				</tr>	
				
				<tr>
					<td><h:outputLabel value="Active : " for="active"></h:outputLabel></td>
					<td><h:selectOneRadio  value="#{projetBean1.active}" id="active">
					<f:selectItem itemValue="Y" itemLabel="Oui"></f:selectItem>
					<f:selectItem itemValue="N" itemLabel="Non"></f:selectItem>
					</h:selectOneRadio></td>
				
				</tr>	
				
				<tr>
					<td colspan="2">
						<h:commandButton value="Sauvegarder" actionListener="#{projetBean1.addProject}"></h:commandButton>
						<h:commandButton value="generate Description" actionListener="#{projetBean1.generateDescription}"></h:commandButton>
					    <h:commandButton value="Annuler" actionListener="#{projetBean1.cancelAction}"></h:commandButton>
						
						
					</td>
				</tr>	
			</table>
		</h:panelGroup>	
		</h:form>

</h:body>
</html>